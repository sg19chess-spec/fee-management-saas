exports.id=791,exports.ids=[791],exports.modules={81381:(e,s,t)=>{Promise.resolve().then(t.bind(t,39155))},95455:(e,s,t)=>{Promise.resolve().then(t.bind(t,52269)),Promise.resolve().then(t.bind(t,44669))},75904:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},39155:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(95344),r=t(3729),n=t(22254),i=t(52269),l=t(20783),o=t.n(l),c=t(56815),d=t(81737),m=t(20518),u=t(36083),h=t(90454),x=t(77850),g=t(62701),f=t(96233),p=t(14122),y=t(97602),b=t(97011),v=t(50364);let j=[{name:"Dashboard",href:"/dashboard",icon:d.Z},{name:"Students",href:"/dashboard/students",icon:m.Z},{name:"Classes",href:"/dashboard/classes",icon:u.Z},{name:"Fee Plans",href:"/dashboard/fee-plans",icon:h.Z},{name:"Payments",href:"/dashboard/payments",icon:x.Z},{name:"Receipts",href:"/dashboard/receipts",icon:h.Z},{name:"Reminders",href:"/dashboard/reminders",icon:g.Z},{name:"Reports",href:"/dashboard/reports",icon:f.Z},{name:"Settings",href:"/dashboard/settings",icon:p.Z}];function _(){let[e,s]=(0,r.useState)(!1),t=(0,n.usePathname)(),{profile:l,signOut:d}=(0,i.useAuth)(),m=async()=>{await d()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:`fixed inset-0 z-50 lg:hidden ${e?"block":"hidden"}`,children:[a.jsx("div",{className:"fixed inset-0 bg-gray-900/80",onClick:()=>s(!1)}),a.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-72 bg-white",children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between px-6 border-b",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fee Management"})}),a.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600",onClick:()=>s(!1),children:a.jsx(y.Z,{className:"h-6 w-6"})})]}),a.jsx("nav",{className:"flex-1 space-y-1 px-4 py-4",children:j.map(e=>{let r=t===e.href;return(0,a.jsxs)(o(),{href:e.href,className:(0,c.W)("group flex items-center px-2 py-2 text-sm font-medium rounded-md",r?"bg-primary text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>s(!1),children:[a.jsx(e.icon,{className:(0,c.W)("mr-3 h-5 w-5 flex-shrink-0",r?"text-white":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-white",children:[l?.first_name?.[0],l?.last_name?.[0]]})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:l?.role?.replace("_"," ")})]})]}),(0,a.jsxs)("button",{onClick:m,className:"mt-3 flex w-full items-center px-2 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md",children:[a.jsx(b.Z,{className:"mr-3 h-5 w-5"}),"Sign out"]})]})]})})]}),a.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col",children:(0,a.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6 pb-4",children:[a.jsx("div",{className:"flex h-16 items-center",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Fee Management"})}),a.jsx("nav",{className:"flex flex-1 flex-col",children:a.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:a.jsx("li",{children:a.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:j.map(e=>{let s=t===e.href;return a.jsx("li",{children:(0,a.jsxs)(o(),{href:e.href,className:(0,c.W)("group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold",s?"bg-primary text-white":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:[a.jsx(e.icon,{className:(0,c.W)("h-6 w-6 shrink-0",s?"text-white":"text-gray-400 group-hover:text-primary")}),e.name]})},e.name)})})})})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-white",children:[l?.first_name?.[0],l?.last_name?.[0]]})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:l?.role?.replace("_"," ")})]})]}),(0,a.jsxs)("button",{onClick:m,className:"mt-3 flex w-full items-center px-2 py-2 text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-md",children:[a.jsx(b.Z,{className:"mr-3 h-5 w-5"}),"Sign out"]})]})]})}),(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex items-center gap-x-6 bg-white px-4 py-4 shadow-sm sm:px-6 lg:hidden",children:[a.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>s(!0),children:a.jsx(v.Z,{className:"h-6 w-6"})}),a.jsx("div",{className:"flex-1 text-sm font-semibold leading-6 text-gray-900",children:"Fee Management"})]})]})}var w=t(30144),N=t(46682),S=t(98693),P=t(71709);function A(){let{profile:e,signOut:s}=(0,w.a)(),t=async()=>{try{await s()}catch(e){console.error("Error signing out:",e)}};return a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Fee Management System"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[a.jsx(g.Z,{className:"h-6 w-6"}),a.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white"})]}),(0,a.jsxs)(S.v,{as:"div",className:"relative",children:[(0,a.jsxs)(S.v.Button,{className:"flex items-center space-x-2 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[a.jsx(N.Z,{className:"h-8 w-8 text-gray-400"}),(0,a.jsxs)("span",{className:"hidden md:block text-gray-700",children:[e?.first_name," ",e?.last_name]})]}),a.jsx(P.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:a.jsx(S.v.Items,{className:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:(0,a.jsxs)("div",{className:"py-1",children:[a.jsx(S.v.Item,{children:({active:e})=>a.jsx(o(),{href:"/dashboard/profile",className:`${e?"bg-gray-100 text-gray-900":"text-gray-700"} block px-4 py-2 text-sm`,children:"Profile Settings"})}),a.jsx(S.v.Item,{children:({active:e})=>a.jsx("button",{onClick:t,className:`${e?"bg-gray-100 text-gray-900":"text-gray-700"} block w-full text-left px-4 py-2 text-sm`,children:"Sign out"})})]})})})]})]})]})})})}var k=t(95252);function C({children:e}){let{user:s,profile:t,loading:l,hasAccess:o}=(0,i.useRequireAuth)("accountant"),c=(0,n.useRouter)();return((0,r.useEffect)(()=>{if(!l&&!o){if(s)switch(t?.role){case"super_admin":c.push("/admin/dashboard");break;case"teacher":c.push("/teacher/dashboard");break;case"student":case"parent":c.push("/student/dashboard");break;default:c.push("/")}else c.push("/")}},[s,t,l,o,c]),l)?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx(k.T,{size:"lg"})}):o?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(_,{}),(0,a.jsxs)("div",{className:"lg:pl-72",children:[a.jsx(A,{}),a.jsx("main",{className:"py-6 sm:py-8 lg:py-10",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-10",children:e})})]})]}):null}},52269:(e,s,t)=>{"use strict";t.r(s),t.d(s,{AuthProvider:()=>l,useAuth:()=>o,useRequireAuth:()=>c});var a=t(95344),r=t(3729),n=t(72829);let i=(0,r.createContext)(void 0);function l({children:e}){let[s,t]=(0,r.useState)(null),[l,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let{data:{session:e}}=await n.OQ.auth.getSession();d(e),t(e?.user??null),e?.user&&await h(e.user.id),u(!1)})();let{data:{subscription:e}}=n.OQ.auth.onAuthStateChange(async(e,s)=>{d(s),t(s?.user??null),s?.user?await h(s.user.id):o(null),u(!1)});return()=>e.unsubscribe()},[]);let h=async e=>{try{let s=await (0,n.et)(e);s&&o(s)}catch(e){console.error("Error loading user profile:",e)}},x=async(e,s)=>{let{error:t}=await n.OQ.auth.signInWithPassword({email:e,password:s});return{error:t}},g=async(e,s,t)=>{let{error:a}=await n.OQ.auth.signUp({email:e,password:s,options:{data:t}});return{error:a}},f=async()=>{await n.OQ.auth.signOut(),o(null)},p=async()=>{s&&await h(s.id)};return a.jsx(i.Provider,{value:{user:s,profile:l,session:c,loading:m,signIn:x,signUp:g,signOut:f,refreshProfile:p},children:e})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function c(e){let{user:s,profile:t,loading:a}=o();if(a||!s||!t)return{user:s,profile:t,loading:a,hasAccess:!1};if(!e)return{user:s,profile:t,loading:a,hasAccess:!0};let r={super_admin:5,school_admin:4,accountant:3,teacher:2,student:1,parent:0},n=r[t.role]>=r[e];return{user:s,profile:t,loading:a,hasAccess:n}}},45397:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var a=t(95344),r=t(56815);function n({children:e,className:s,variant:t="default",size:n="md"}){return a.jsx("span",{className:(0,r.W)("inline-flex items-center font-medium rounded-full",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[t],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-sm"}[n],s),children:e})}},95252:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(95344);t(3729);var r=t(56815);let n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"};function i({size:e="md",className:s}){return a.jsx("div",{className:(0,r.W)("spinner",n[e],s),role:"status","aria-label":"Loading",children:a.jsx("span",{className:"sr-only",children:"Loading..."})})}},30144:(e,s,t)=>{"use strict";t.d(s,{a:()=>n});var a=t(3729),r=t(72829);function n(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await r.OQ.auth.getSession();e?.user&&await o(e.user.id),l(!1)})();let{data:{subscription:e}}=r.OQ.auth.onAuthStateChange(async(e,t)=>{t?.user?await o(t.user.id):(s(null),n(null)),l(!1)});return()=>e.unsubscribe()},[]);let o=async e=>{try{let{data:t,error:a}=await r.OQ.from("users").select(`
          *,
          institutions (
            id,
            name,
            code,
            settings
          )
        `).eq("id",e).single();if(a){console.error("Error fetching user profile:",a);return}n(t),s({id:t.id,email:t.email,role:t.role,institution_id:t.institution_id,first_name:t.first_name,last_name:t.last_name,institution:t.institutions})}catch(e){console.error("Error in fetchUserProfile:",e)}};return{user:e,profile:t,loading:i,signOut:async()=>{try{let{error:e}=await r.OQ.auth.signOut();if(e)throw e;s(null),n(null)}catch(e){throw console.error("Error signing out:",e),e}}}}},72829:(e,s,t)=>{"use strict";t.d(s,{OQ:()=>a,et:()=>n});let a=(0,t(99072).eI)("https://placeholder.supabase.co","placeholder-anon-key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),r=async()=>{let{data:{user:e},error:s}=await a.auth.getUser();return s?(console.error("Error getting user:",s),null):e},n=async e=>{let s=e||(await r())?.id;if(!s)return null;let{data:t,error:n}=await a.from("users").select(`
      *,
      institutions (
        id,
        name,
        code,
        settings
      )
    `).eq("id",s).single();return n?(console.error("Error getting user profile:",n),null):t}},14159:(e,s,t)=>{"use strict";t.d(s,{C5:()=>p,PV:()=>g,Po:()=>b,sE:()=>h,xS:()=>c});let a=e=>"string"==typeof e?e:"",r=e=>"number"==typeof e?e:0,n=e=>"string"==typeof e?e:e instanceof Date?e.toISOString():new Date().toISOString(),i=(e,s)=>Array.isArray(e)&&e.length>0?e[0]:s,l=e=>({name:a(e?.name),section:a(e?.section)}),o=e=>({id:a(e?.id),admission_number:a(e?.admission_number),first_name:a(e?.first_name),last_name:a(e?.last_name),guardian_phone:a(e?.guardian_phone),guardian_email:a(e?.guardian_email),enrollment_status:a(e?.enrollment_status),admission_date:n(e?.admission_date),classes:l(i(e?.classes,{name:"",section:""}))}),c=e=>e&&Array.isArray(e)?e.map(o):[],d=e=>({first_name:a(e?.first_name),last_name:a(e?.last_name),admission_number:a(e?.admission_number)}),m=e=>({name:a(e?.name),section:a(e?.section)}),u=e=>({id:a(e?.id),receipt_number:a(e?.receipt_number),paid_amount:r(e?.paid_amount),payment_method:a(e?.payment_method),payment_status:a(e?.payment_status),payment_date:n(e?.payment_date),students:d(i(e?.students,{first_name:"",last_name:"",admission_number:""})),classes:m(i(e?.classes,{name:"",section:""}))}),h=e=>e&&Array.isArray(e)?e.map(u):[],x=e=>({id:a(e?.id),name:a(e?.name),section:a(e?.section)}),g=e=>e&&Array.isArray(e)?e.map(x):[],f=e=>({id:a(e?.id),name:a(e?.name),description:a(e?.description),academic_year:a(e?.academic_year),total_amount:r(e?.total_amount),discount_percentage:r(e?.discount_percentage),discount_amount:r(e?.discount_amount),discount_reason:a(e?.discount_reason),status:a(e?.status),created_at:n(e?.created_at),updated_at:n(e?.updated_at)}),p=e=>e&&Array.isArray(e)?e.map(f):[],y=e=>({id:a(e?.id),outstanding_amount:r(e?.outstanding_amount),due_date:n(e?.due_date),status:a(e?.status),students:{first_name:a(i(e?.students,{first_name:""})?.first_name),last_name:a(i(e?.students,{last_name:""})?.last_name),admission_number:a(i(e?.students,{admission_number:""})?.admission_number),guardian_phone:a(i(e?.students,{guardian_phone:""})?.guardian_phone)},classes:{name:a(i(e?.classes,{name:""})?.name),section:a(i(e?.classes,{section:""})?.section)},fee_items:{name:a(i(e?.fee_items,{name:""})?.name)}}),b=e=>e&&Array.isArray(e)?e.map(y):[]},91626:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(56815),r=t(79377);function n(...e){return(0,r.m6)((0,a.W)(e))}},96339:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,t(86843).createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\app\dashboard\layout.tsx`),{__esModule:r,$$typeof:n}=a,i=a.default},30423:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h,metadata:()=>u});var a=t(25036),r=t(80265),n=t.n(r);t(67272);var i=t(69636),l=t(86843);let o=(0,l.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx`),{__esModule:c,$$typeof:d}=o;o.default;let m=(0,l.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx#AuthProvider`);(0,l.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx#useAuth`),(0,l.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx#useRequireAuth`);let u={title:"Fee Management System",description:"Comprehensive fee management solution for schools and colleges",keywords:["fee management","school","college","education","payments"],authors:[{name:"Fee Management Team"}],viewport:"width=device-width, initial-scale=1",robots:"index, follow",openGraph:{title:"Fee Management System",description:"Comprehensive fee management solution for schools and colleges",type:"website",locale:"en_US"}};function h({children:e}){return a.jsx("html",{lang:"en",className:"h-full",children:a.jsx("body",{className:`${n().className} h-full bg-gray-50`,children:(0,a.jsxs)(m,{children:[e,a.jsx(i.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}},67272:()=>{}};