(()=>{var e={};e.id=165,e.ids=[165],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},85049:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=r(50482),n=r(69108),o=r(62563),a=r.n(o),i=r(68300),u={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>i[e]);r.d(t,u);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,30423)),"C:\\Users\\sg13c\\fee-management-saas\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=[],d="/_not-found",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/_not-found",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},95455:(e,t,r)=>{Promise.resolve().then(r.bind(r,52269)),Promise.resolve().then(r.bind(r,44669))},75904:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},52269:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>i,useAuth:()=>u,useRequireAuth:()=>l});var s=r(95344),n=r(3729),o=r(72829);let a=(0,n.createContext)(void 0);function i({children:e}){let[t,r]=(0,n.useState)(null),[i,u]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,p]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let{data:{session:e}}=await o.OQ.auth.getSession();c(e),r(e?.user??null),e?.user&&await m(e.user.id),p(!1)})();let{data:{subscription:e}}=o.OQ.auth.onAuthStateChange(async(e,t)=>{c(t),r(t?.user??null),t?.user?await m(t.user.id):u(null),p(!1)});return()=>e.unsubscribe()},[]);let m=async e=>{try{let t=await (0,o.et)(e);t&&u(t)}catch(e){console.error("Error loading user profile:",e)}},h=async(e,t)=>{let{error:r}=await o.OQ.auth.signInWithPassword({email:e,password:t});return{error:r}},g=async(e,t,r)=>{let{error:s}=await o.OQ.auth.signUp({email:e,password:t,options:{data:r}});return{error:s}},x=async()=>{await o.OQ.auth.signOut(),u(null)},f=async()=>{t&&await m(t.id)};return s.jsx(a.Provider,{value:{user:t,profile:i,session:l,loading:d,signIn:h,signUp:g,signOut:x,refreshProfile:f},children:e})}function u(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function l(e){let{user:t,profile:r,loading:s}=u();if(s||!t||!r)return{user:t,profile:r,loading:s,hasAccess:!1};if(!e)return{user:t,profile:r,loading:s,hasAccess:!0};let n={super_admin:5,school_admin:4,accountant:3,teacher:2,student:1,parent:0},o=n[r.role]>=n[e];return{user:t,profile:r,loading:s,hasAccess:o}}},72829:(e,t,r)=>{"use strict";r.d(t,{OQ:()=>s,et:()=>o});let s=(0,r(99072).eI)("https://placeholder.supabase.co","placeholder-anon-key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),n=async()=>{let{data:{user:e},error:t}=await s.auth.getUser();return t?(console.error("Error getting user:",t),null):e},o=async e=>{let t=e||(await n())?.id;if(!t)return null;let{data:r,error:o}=await s.from("users").select(`
      *,
      institutions (
        id,
        name,
        code,
        settings
      )
    `).eq("id",t).single();return o?(console.error("Error getting user profile:",o),null):r}},30423:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>p});var s=r(25036),n=r(80265),o=r.n(n);r(67272);var a=r(69636),i=r(86843);let u=(0,i.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx`),{__esModule:l,$$typeof:c}=u;u.default;let d=(0,i.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx#AuthProvider`);(0,i.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx#useAuth`),(0,i.createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\components\providers\AuthProvider.tsx#useRequireAuth`);let p={title:"Fee Management System",description:"Comprehensive fee management solution for schools and colleges",keywords:["fee management","school","college","education","payments"],authors:[{name:"Fee Management Team"}],viewport:"width=device-width, initial-scale=1",robots:"index, follow",openGraph:{title:"Fee Management System",description:"Comprehensive fee management solution for schools and colleges",type:"website",locale:"en_US"}};function m({children:e}){return s.jsx("html",{lang:"en",className:"h-full",children:s.jsx("body",{className:`${o().className} h-full bg-gray-50`,children:(0,s.jsxs)(d,{children:[e,s.jsx(a.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}},67272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,423],()=>r(85049));module.exports=s})();