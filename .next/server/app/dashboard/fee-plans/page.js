(()=>{var e={};e.id=218,e.ids=[218],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},32418:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=s(50482),a=s(69108),i=s(62563),n=s.n(i),l=s(68300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["fee-plans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,87371)),"C:\\Users\\sg13c\\fee-management-saas\\app\\dashboard\\fee-plans\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,96339)),"C:\\Users\\sg13c\\fee-management-saas\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,30423)),"C:\\Users\\sg13c\\fee-management-saas\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\sg13c\\fee-management-saas\\app\\dashboard\\fee-plans\\page.tsx"],m="/dashboard/fee-plans/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/fee-plans/page",pathname:"/dashboard/fee-plans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},20639:(e,t,s)=>{Promise.resolve().then(s.bind(s,25928))},25928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(95344),a=s(3729),i=s(20783),n=s.n(i),l=s(99072),d=s(52269),o=s(95252),c=s(26101),m=s(95282),x=s(45397),u=s(14159),h=s(33759),p=s(15965),g=s(67993),f=s(98138);let b=(0,l.eI)("https://placeholder.supabase.co","placeholder-anon-key");function y(){let{profile:e}=(0,d.useAuth)(),[t,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[y,v]=(0,a.useState)(null),[j,w]=(0,a.useState)(""),[N,_]=(0,a.useState)("all"),[k,C]=(0,a.useState)("all"),[E,P]=(0,a.useState)(1),[q,M]=(0,a.useState)(0),[A,L]=(0,a.useState)(0);(0,a.useEffect)(()=>{e?.institution_id&&S()},[e?.institution_id]),(0,a.useEffect)(()=>{e?.institution_id&&(P(1),S())},[j,N,k,e?.institution_id]),(0,a.useEffect)(()=>{e?.institution_id&&S()},[E,e?.institution_id]);let S=async()=>{if(e?.institution_id)try{l(!0),v(null);let t=b.from("fee_plans").select(`
          id,
          name,
          description,
          academic_year,
          is_active,
          created_at,
          fee_items(
            id,
            name,
            amount,
            fee_type
          )
        `,{count:"exact"}).eq("institution_id",e.institution_id);j&&(t=t.or(`name.ilike.%${j}%,description.ilike.%${j}%`)),"all"!==N&&(t=t.eq("academic_year",N)),"all"!==k&&(t=t.eq("is_active","active"===k));let r=(E-1)*10;t=t.range(r,r+10-1);let{data:a,error:i,count:n}=await t.order("created_at",{ascending:!1});if(i)throw i;let d=a?.map(e=>({...e,_count:{fee_items:e.fee_items?.length||0}}))||[];s(d?.map(e=>({...u.C5([e])[0],is_active:e.is_active||!1,fee_items:e.fee_items||[],_count:{fee_items:e.fee_items?.length||0}}))||[]),M(n||0),L(Math.ceil((n||0)/10))}catch(e){console.error("Error fetching fee plans:",e),v("Failed to load fee plans")}finally{l(!1)}},z=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Z=e=>e?.reduce((e,t)=>e+Number(t.amount),0)||0,$=e=>new Date(e).toLocaleDateString("en-IN");return i&&0===t.length?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(o.T,{size:"lg"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Plans"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage fee structures and plans"})]}),r.jsx(n(),{href:"/dashboard/fee-plans/create",children:(0,r.jsxs)(c.z,{children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"New Fee Plan"]})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Plans"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(m.I,{type:"text",placeholder:"Search by name or description...",value:j,onChange:e=>w(e.target.value),className:"pl-10"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),(0,r.jsxs)("select",{value:N,onChange:e=>_(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Years"}),r.jsx("option",{value:"2024-25",children:"2024-25"}),r.jsx("option",{value:"2023-24",children:"2023-24"}),r.jsx("option",{value:"2022-23",children:"2022-23"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(c.z,{variant:"outline",onClick:()=>{w(""),_("all"),C("all")},className:"w-full",children:"Clear Filters"})})]}),r.jsx("div",{className:"mt-4",children:(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[q," fee plan",1!==q?"s":""," found"]})})]}),y&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading fee plans"}),r.jsx("p",{className:"mt-1 text-sm text-red-700",children:y})]})})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Items"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),r.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.academic_year}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z(Z(e.fee_items))}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e._count?.fee_items||0," items"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(x.C,{variant:e.is_active?"success":"default",children:e.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$(e.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[r.jsx(n(),{href:`/dashboard/fee-plans/${e.id}/view`,children:r.jsx(c.z,{variant:"outline",size:"sm",children:r.jsx(g.Z,{className:"h-4 w-4"})})}),r.jsx(n(),{href:`/dashboard/fee-plans/${e.id}/edit`,children:r.jsx(c.z,{variant:"outline",size:"sm",children:r.jsx(f.Z,{className:"h-4 w-4"})})})]})})]},e.id))})]})}),A>1&&(0,r.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>P(Math.max(1,E-1)),disabled:1===E,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>P(Math.min(A,E+1)),disabled:E===A,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,r.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[r.jsx("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(E-1)*10+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(10*E,q)})," ","of"," ",r.jsx("span",{className:"font-medium",children:q})," ","results"]})}),r.jsx("div",{children:(0,r.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[r.jsx("button",{onClick:()=>P(Math.max(1,E-1)),disabled:1===E,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,A)},(e,t)=>{let s=Math.max(1,Math.min(A-4,E-2))+t;return r.jsx("button",{onClick:()=>P(s),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${E===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:s},s)}),r.jsx("button",{onClick:()=>P(Math.min(A,E+1)),disabled:E===A,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]})]})}},26101:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var r=s(95344),a=s(3729),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=((e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:o="",children:c,...m},x)=>(0,a.createElement)("svg",{ref:x,...i,width:r,height:r,stroke:s,strokeWidth:d?24*Number(l)/Number(r):l,className:["lucide",`lucide-${n(e)}`,o].join(" "),...m},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s})("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=s(91626);let o=(0,a.forwardRef)(({className:e,variant:t="default",size:s="md",loading:a=!1,disabled:i,children:n,...o},c)=>(0,r.jsxs)("button",{ref:c,className:(0,d.cn)("inline-flex items-center justify-center font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 active:scale-95 disabled:transform-none",{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300 shadow-md hover:shadow-lg",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500 disabled:bg-gray-50 disabled:text-gray-400 shadow-sm hover:shadow-md",outline:"border-2 border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-400 focus:ring-blue-500 disabled:bg-gray-100 disabled:text-gray-400 shadow-sm hover:shadow-md",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300 shadow-md hover:shadow-lg"}[t],{sm:"px-3 py-1.5 text-sm h-8",md:"px-4 py-2 text-sm h-10",lg:"px-6 py-3 text-base h-12"}[s],(i||a)&&"cursor-not-allowed",e),disabled:i||a,...o,children:[a&&r.jsx(l,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),n]}));o.displayName="Button"},95282:(e,t,s)=>{"use strict";s.d(t,{I:()=>i});var r=s(95344);s(3729);var a=s(91626);function i({error:e,label:t,helperText:s,className:i,id:n,icon:l,...d}){let o=n||`input-${Math.random().toString(36).substr(2,9)}`;return(0,r.jsxs)("div",{className:"space-y-2",children:[t&&r.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsxs)("div",{className:"relative",children:[l&&r.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:l}),r.jsx("input",{id:o,className:(0,a.cn)("flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",l&&"pl-10",e&&"border-red-500 focus-visible:ring-red-500",i),...d})]}),e&&r.jsx("p",{className:"text-sm text-red-600",children:e}),s&&!e&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}},87371:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`C:\Users\sg13c\fee-management-saas\app\dashboard\fee-plans\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},67993:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3729);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},15965:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3729);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})},98138:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3729);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},33759:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3729);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,423,112,748,791],()=>s(32418));module.exports=r})();